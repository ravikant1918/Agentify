{% for message in messages %}
<div class="flex {{ 'justify-end' if message.role == 'user' else 'justify-start' }}">
    <div class="max-w-xs lg:max-w-md px-4 py-2 rounded-lg {{ 
        'bg-primary text-white' if message.role == 'user' 
        else 'bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100' }}">
        <p class="text-sm">{{ message.content }}</p>
        <p class="text-xs opacity-70 mt-1">{{ message.timestamp[:16] if message.timestamp else '' }}</p>
    </div>
</div>
{% endfor %}